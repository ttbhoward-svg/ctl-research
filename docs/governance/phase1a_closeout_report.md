# Phase 1a Closeout Report

## Status

Phase 1a infrastructure build is **code-complete**. All tasks (1–15) have
passing unit tests. Gate 1 decision engine is operational.

## Completed Tasks

| Task | Module | Tests | Description |
|------|--------|-------|-------------|
| 1 | `universe.py` | Pass | Symbol universe (29 symbols, 11 clusters) |
| 2 | `data_loader.py` | Pass | OHLCV data loading + sanitization |
| 3 | `indicators.py` | Pass | EMA, slope, ATR, bars of air |
| 4 | `b1_detector.py`, `simulator.py`, `ranking_gate.py` | Pass | B1 trigger detection, trade simulation, OOS ranking |
| 4b | `slippage_stress.py` | Pass | Slippage stress test (0–3 ticks) |
| 5 | `cross_validation.py` | Pass | Purged time-series CV |
| 6 | `chart_inspector.py` | Pass | Trade visualization payloads |
| 7 | `cot_loader.py`, `vix_loader.py`, `external_merge.py` | Pass | COT + VIX external data merge |
| 8 | `dataset_assembler.py` | Pass | Assembled dataset (SCHEMA_COLUMNS) |
| 9 | `health_check.py` | Pass | Data health diagnostics |
| 10 | `regression.py` | Pass | Elastic Net + model card |
| 11 | `param_sensitivity.py` | Pass | Parameter sensitivity sweep |
| 11b | `negative_controls.py` | Pass | Randomized-label, lag-shift, placebo |
| 11c | `entry_degradation.py` | Pass | Adverse fill + delayed entry |
| 12 | `chart_study.py` | Pass | Chart study session infrastructure |
| 13 | `oos_evaluation.py` | Pass | OOS scoring + calibration |
| 14 | `gate_decision.py` | Pass | Gate 1 pass/fail decision package |
| 15 | `drift_monitor.py`, `archive.py` | Pass | Drift monitoring + archive |

## Gate 1 Decision Reference

The Gate 1 decision engine (`src/ctl/gate_decision.py`) evaluates 9 criteria:

1. OOS trade count >= 30
2. OOS tercile spread >= 1.0R
3. Score monotonicity (top > mid > bottom)
4. Feature cap respected (9 + 1 frozen)
5. Model card complete (v2 template)
6. Negative controls passed (all 3)
7. Entry degradation within tolerances
8. Slippage stress profitable at 2 ticks
9. Quintile calibration directionally monotonic

Decision format documented in `docs/governance/phase_gate_decision_v1.md`.

## Archived Artifact Locations

| Artifact | Path |
|----------|------|
| Pre-registration | `configs/pre_registration_v1.yaml` |
| Phase config | `configs/phase1a.yaml` |
| Model card | `docs/governance/model_card_v1.md` |
| Gate decision format | `docs/governance/phase_gate_decision_v1.md` |
| Phase gate checklist | `docs/governance/CTL_Phase_Gate_Checklist_One_Page.md` |

Archive manifest generated by `src/ctl/archive.py` with SHA-256 hashes.

## Drift Baseline Definition

The drift monitoring baseline (`src/ctl/drift_monitor.py`) captures:

- **Feature distributions:** Per-feature PSI bin edges from IS data (10 bins)
- **Score distribution:** PSI bin edges from IS predicted scores
- **Performance metrics:** IS avg R, win rate, total R

Drift thresholds (Phase Gate Checklist defaults):

| Metric | OK | WATCH | ALERT |
|--------|----|----|-------|
| Feature PSI | < 0.10 | 0.10–0.25 | > 0.25 |
| Score PSI | < 0.10 | 0.10–0.25 | > 0.25 |
| Rolling avg R | >= 0.0 | — | < 0.0 |
| Rolling win rate | >= 0.35 | — | < 0.35 |

## Next-Phase Prerequisites

Before starting Phase 1b (two-stage EV tests):

1. **Gate 1 must PASS** — run `evaluate_gate1()` with real data
2. **Archive manifest generated** — `build_manifest()` for provenance
3. **Drift baseline saved** — `build_baseline()` from IS data
4. **All model artifacts locked** — no feature/threshold changes allowed
5. **OOS data collected** — minimum 30 trades with realized outcomes

Phase 1b scope (Gate 2): two-stage EV model, cross-asset confirmation,
regime/term-structure overlay. See Phase Gate Checklist Gate 2 criteria.
